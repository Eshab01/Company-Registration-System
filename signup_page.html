<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Company Registration System</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }
    .form-section {
      margin-bottom: 25px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    .form-section h2 {
      color: #3498db;
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    .form-row {
      display: flex;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    .form-group {
      flex: 1 0 250px;
      margin-right: 15px;
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    input:focus, select:focus {
      border-color: #3498db;
      outline: none;
      box-shadow: 0 0 3px rgba(52, 152, 219, 0.3);
    }
    .error {
      color: #e74c3c;
      font-size: 12px;
      margin-top: 5px;
      display: none;
    }
    .password-requirements {
      font-size: 12px;
      color: #7f8c8d;
      margin-top: 5px;
    }
    .btn-submit {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
      display: block;
      margin: 30px auto 0;
      transition: background-color 0.3s;
    }
    .btn-submit:hover {
      background-color: #2980b9;
    }
    .invalid {
      border-color: #e74c3c !important;
    }
    .location-fields {
      display: flex;
      gap: 10px;
    }
    .location-fields .form-group {
      flex: 1;
    }
    @media (max-width: 600px) {
      .form-group {
        flex: 1 0 100%;
        margin-right: 0;
      }
      .location-fields {
        flex-direction: column;
        gap: 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Company Registration System</h1>
    
    <form id="signupForm">
      <!-- Authentication Section -->
      <div class="form-section">
        <h2>Authentication Details</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="userName">Username*</label>
            <input type="text" id="userName" name="userName" required>
            <div class="error" id="userNameError">Username must be at least 4 characters</div>
          </div>
          <div class="form-group">
            <label for="userPass">Password*</label>
            <input type="password" id="userPass" name="userPass" required>
            <div class="error" id="userPassError">Password is required</div>
            <div class="password-requirements">
              Must be at least 8 characters with a mix of letters, numbers and symbols
            </div>
          </div>
          <div class="form-group">
            <label for="confirmPass">Confirm Password*</label>
            <input type="password" id="confirmPass" name="confirmPass" required>
            <div class="error" id="confirmPassError">Passwords do not match</div>
          </div>
        </div>
      </div>
      
      <!-- User Details Section -->
      <div class="form-section">
        <h2>User Information</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="fullName">Full Name*</label>
            <input type="text" id="fullName" name="fullName" required>
            <div class="error" id="fullNameError">Full name is required</div>
          </div>
          <div class="form-group">
            <label for="userDob">Date of Birth*</label>
            <input type="date" id="userDob" name="userDob" required>
            <div class="error" id="userDobError">Valid date of birth is required</div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="userRole">Role*</label>
            <select id="userRole" name="userRole" required>
              <option value="">Select Role</option>
              <option value="admin">Administrator</option>
              <option value="manager">Manager</option>
              <option value="employee">Employee</option>
              <option value="other">Other</option>
            </select>
            <div class="error" id="userRoleError">Please select a role</div>
          </div>
          <div class="form-group">
            <label for="userCompanyKey">Company ID (if joining existing company)</label>
            <input type="text" id="userCompanyKey" name="userCompanyKey" placeholder="Leave blank if registering new company">
          </div>
        </div>
      </div>
      
      <!-- Company Details Section -->
      <div class="form-section">
        <h2>Company Information</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="companyName">Company Name*</label>
            <input type="text" id="companyName" name="companyName" required>
            <div class="error" id="companyNameError">Company name is required</div>
          </div>
          <div class="form-group">
            <label for="companyNoOfemployee">Number of Employees*</label>
            <input type="number" id="companyNoOfemployee" name="companyNoOfemployee" min="1" required>
            <div class="error" id="companyNoOfemployeeError">Valid number is required</div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group" style="flex: 100%;">
            <label for="companyAdress">Company Address*</label>
            <input type="text" id="companyAdress" name="companyAdress" required>
            <div class="error" id="companyAdressError">Address is required</div>
          </div>
        </div>
        
        <div class="form-row location-fields">
          <div class="form-group">
            <label for="companyLatitude">Latitude</label>
            <input type="number" id="companyLatitude" name="companyLatitude" step="0.000001" placeholder="Automatically filled or enter manually">
          </div>
          <div class="form-group">
            <label for="companyLongitude">Longitude</label>
            <input type="number" id="companyLongitude" name="companyLongitude" step="0.000001" placeholder="Automatically filled or enter manually">
          </div>
        </div>
      </div>
      
      <button type="submit" class="btn-submit">Register Account</button>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('signupForm');
      const dobInput = document.getElementById('userDob');
      dobInput.addEventListener('change', function() {
        const today = new Date();
        const birthDate = new Date(this.value);
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
          age--;
        }
        if (age < 18) {
          document.getElementById('userDobError').textContent = 'You must be at least 18 years old';
          document.getElementById('userDobError').style.display = 'block';
          this.classList.add('invalid');
        } else {
          document.getElementById('userDobError').style.display = 'none';
          this.classList.remove('invalid');
        }
      });
      const passwordInput = document.getElementById('userPass');
      const confirmInput = document.getElementById('confirmPass');
      
      passwordInput.addEventListener('input', validatePassword);
      confirmInput.addEventListener('input', validateConfirmPassword);
      
      function validatePassword() {
        const password = passwordInput.value;
        const error = document.getElementById('userPassError');
        
        if (password.length < 8) {
          error.textContent = 'Password must be at least 8 characters';
          error.style.display = 'block';
          passwordInput.classList.add('invalid');
          return false;
        }
        
        if (!/[A-Za-z]/.test(password) || !/[0-9]/.test(password) || !/[^A-Za-z0-9]/.test(password)) {
          error.textContent = 'Password must include letters, numbers, and symbols';
          error.style.display = 'block';
          passwordInput.classList.add('invalid');
          return false;
        }
        
        error.style.display = 'none';
        passwordInput.classList.remove('invalid');
        return true;
      }
      
      function validateConfirmPassword() {
        const password = passwordInput.value;
        const confirm = confirmInput.value;
        const error = document.getElementById('confirmPassError');
        
        if (password !== confirm) {
          error.style.display = 'block';
          confirmInput.classList.add('invalid');
          return false;
        }
        
        error.style.display = 'none';
        confirmInput.classList.remove('invalid');
        return true;
      }
      const companyKeyInput = document.getElementById('userCompanyKey');
      const companyFieldset = document.querySelectorAll('.form-section:last-of-type input:not(#userCompanyKey)');
      
      companyKeyInput.addEventListener('input', function() {
        const hasCompanyKey = this.value.trim() !== '';
        companyFieldset.forEach(field => {
          if (hasCompanyKey) {
            field.removeAttribute('required');
            field.previousElementSibling.classList.add('optional');
          } else {
            if (field.id === 'companyName' || field.id === 'companyAdress' || field.id === 'companyNoOfemployee') {
              field.setAttribute('required', '');
              field.previousElementSibling.classList.remove('optional');
            }
          }
        });
      });
      

          const userAge = calculateAge(userData.userDob);
          console.log('Additional calculated field - userAge:', userAge);
        }
      );     
      function calculateAge(birthDateString) {
        const today = new Date();
        const birthDate = new Date(birthDateString);
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
          age--;
        }
        return age;
      }
  </script>
</body>
</html>